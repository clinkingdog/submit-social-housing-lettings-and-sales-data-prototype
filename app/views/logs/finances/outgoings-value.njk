{% extends "layouts/question.njk" %}

{% set outgoingsPeriod = log[section.id]["outgoings-period"] %}
{% if outgoingsPeriod == "fortnightly" %}
  {% set period = "every 2 weeks" %}
{% elif outgoingsPeriod == "every-4-weeks" %}
  {% set period = "every 4 weeks" %}
{% elif outgoingsPeriod == "monthly" %}
  {% set period = "every month" %}
{% else %}
  {% set period = "every week" %}
{% endif %}
{% set title = "Household rent and charges" %}
{% set questionId = "outgoings-value" %}

{% block question %}
  {% call govukFieldset({
    legend: {
      html: macro.heading(title, caption)
    }
  }) %}
    {{ govukInput(decorate({
      classes: "govuk-input--width-5",
      label: {
        classes: "govuk-label--m",
        text: "What is the basic rent?"
      },
      hint: {
        text: "If eligible for housing benefit or Universal Credit."
      },
      inputmode: "numeric",
      pattern: "[0-9]*",
      prefix: {
        text: "£"
      },
      suffix: {
        text: period
      }
    }, ["logs", log.id, section.id, "outgoings-rent"])) }}

    {{ govukInput(decorate({
      classes: "govuk-input--width-5",
      label: {
        classes: "govuk-label--m",
        text: "What is the service charge?"
      },
      hint: {
        text: "If eligible for housing benefit or Universal Credit."
      },
      inputmode: "numeric",
      pattern: "[0-9]*",
      prefix: {
        text: "£"
      },
      suffix: {
        text: period
      }
    }, ["logs", log.id, section.id, "outgoings-service-charge"])) }}

    {{ govukInput(decorate({
      classes: "govuk-input--width-5",
      label: {
        classes: "govuk-label--m",
        text: "What is the personal service charge?"
      },
      hint: {
        text: "For example, heating or hot water."
      },
      inputmode: "numeric",
      pattern: "[0-9]*",
      prefix: {
        text: "£"
      },
      suffix: {
        text: period
      }
    }, ["logs", log.id, section.id, "outgoings-personal-charge"])) }}

    {{ govukInput(decorate({
      classes: "govuk-input--width-5",
      label: {
        classes: "govuk-label--m",
        text: "What is the support charge?"
      },
      hint: {
        text: "Any charges made to fund support services included in tenancy agreement."
      },
      inputmode: "numeric",
      pattern: "[0-9]*",
      prefix: {
        text: "£"
      },
      suffix: {
        text: period
      }
    }, ["logs", log.id, section.id, "outgoings-support-charge"])) }}

    <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--m">

    {{ govukInput(decorate({
      classes: "govuk-input--width-5",
      label: {
        classes: "govuk-label--m",
        text: "Total charge"
      },
      hint: {
        text: "Calculated total for rent and all charges."
      },
      prefix: {
        text: "£"
      },
      suffix: {
        text: period
      },
      attributes: {
        "data-module": "output",
        "data-output-for": "logs-" + log.id + "-" + section.id + "-outgoings-rent " +
          "logs-" + log.id + "-" + section.id + "-outgoings-service-charge " +
          "logs-" + log.id + "-" + section.id + "-outgoings-personal-charge " +
          "logs-" + log.id + "-" + section.id + "-outgoings-support-charge"
      }
    }, ["logs", log.id, section.id, questionId])) }}
  {% endcall %}
{% endblock %}
