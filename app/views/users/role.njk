{% extends "form.njk" %}

{% set title = "What is this userâ€™s role?" %}
{% if user.role %}
  {# Editing an existing user #}
  {% set buttonText = "Save changes" %}
  {% set backLink = userPath %}
  {% set formAction = userPath %}
{% else %}
  {# Inviting a new user #}
  {% set buttonText = "Send invitation" %}
  {% set backLink = userPath + "/personal-details" %}
  {% set formAction = "/users?success=invited&userId=" + user.id %}
{% endif %}

{% block form %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% set dataProviderPermissionsHintHtml %}
        <ul class="govuk-list govuk-list--bullet govuk-hint">
          <li>Can view and submit logs</li>
        </ul>
      {% endset %}

      {% set dataCoordinatorPermissionsHintHtml %}
        <ul class="govuk-list govuk-list--bullet govuk-hint">
          <li>Can view and submit logs</li>
          <li>Can manage other users</li>
        </ul>
      {% endset %}

      {{ govukRadios(decorate({
        fieldset: {
          legend: {
            html: macro.heading(title, user.name)
          }
        },
        items: [{
          value: "provider",
          text: "Data provider",
          label: {
            classes: "govuk-label--s"
          },
          hint: {
            html: dataProviderPermissionsHintHtml
          }
        }, {
          value: "coordinator",
          text: "Data coordinator",
          label: {
            classes: "govuk-label--s"
          },
          hint: {
            html: dataCoordinatorPermissionsHintHtml
          }
        }]
      }, ["users", user.id, "role"])) }}

      {{ govukButton({
        text: buttonText
      }) }}
    </div>
  </div>
{% endblock %}
