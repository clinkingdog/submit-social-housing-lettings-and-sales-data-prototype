{% extends "layouts/form.njk" %}

{% set hasAnsweredQuestion =
  log[section.id][itemId][questionId] or
  log[section.id][questionId] %}

{% if questionId and hasAnsweredQuestion %}
  {% set formAction = formAction or sectionPath + "/check-your-answers" %}
  {% set buttonText = buttonText or "Save changes" %}
{% else %}
  {% set formAction = formAction or paths.current %}
  {% set buttonText = buttonText or "Save and continue" %}
{% endif %}

{% block pageNavigation %}
  {{ govukBreadcrumbs({
    items: [{
      href: "/logs",
      text: "Logs"
    }, {
      href: "/logs/" + log.id,
      text: "Log " + log.id
    }, {
      text: caption
    }]
  }) }}
{% endblock %}

{% block form %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      {{ govukErrorSummary({
        titleText: "There is a problem",
        errorList: errorList(errors)
      }) if errors }}

      {% block question %}
      {% endblock %}

      {{ govukButton({
        text: buttonText
      }) }}
    </div>
  </div>
{% endblock %}
